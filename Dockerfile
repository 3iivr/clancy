FROM openjdk:13-alpine

ARG JAR_BASE_NAME=${JAR_BASE_NAME}
ARG BUILD_VERSION=${BUILD_VERSION}
ARG JAR_FILE=$JAR_BASE_NAME-$BUILD_VERSION.jar

ARG START_SCRIPT=start.sh

COPY ${JAR_FILE} app.jar
COPY ${START_SCRIPT} start.sh

ENTRYPOINT ["./start.sh"]

CMD ["${BOT_OWNER}", "${BOT_TOKEN}", "${BOT_PREFIX}", "${INACTIVE_THRESHOLD}", "${TASK_INACTIVE_FIXED_DELAY}", "${RABBIT_HOSTNAME}", "${RABBIT_USERNAME}", "${RABBIT_PASSWORD}", "${RABBIT_VIRTUALHOST}", "${RABBIT_CONNECTION_TIMEOUT}", "${RABBIT_REQUEST_HEARTBEAT}", "${RABBIT_QUEUE_TTL}"]